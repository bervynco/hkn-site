<!-- Skeleton Loader -->
<div *ngIf="loading" class="container mx-auto p-4 md:p-12 animate-pulse flex flex-wrap md:flex-nowrap gap-8 text-black text-family">
  <!-- Left Skeleton -->
  <div class="w-full md:w-[70%] space-y-4">
    <div class="bg-gray-300 w-full h-64 rounded"></div>
    <div class="h-6 bg-gray-300 w-4/5 rounded"></div>
    <div class="space-y-2">
      <div class="h-4 bg-gray-300 w-full rounded"></div>
      <div class="h-4 bg-gray-300 w-5/6 rounded"></div>
      <div class="h-4 bg-gray-300 w-3/4 rounded"></div>
    </div>
    <div class="h-5 w-28 bg-gray-300 rounded mt-2"></div>
    <div class="flex gap-4 mt-4">
      <div class="h-4 w-24 bg-gray-300 rounded"></div>
      <div class="h-4 w-20 bg-gray-300 rounded"></div>
      <div class="h-4 w-28 bg-gray-300 rounded"></div>
    </div>
    <div class="h-32 bg-gray-200 rounded"></div>
    <div class="h-32 bg-gray-200 rounded"></div>
    <div class="h-32 bg-gray-200 rounded"></div>
  </div>

  <!-- Right Skeleton -->
  <div class="w-full md:w-[30%] space-y-4">
    <div class="h-64 bg-gray-300 rounded"></div>
    <div class="h-20 bg-gray-300 rounded"></div>
    <div class="h-20 bg-gray-300 rounded"></div>
  </div>
</div>

<!-- Actual Article -->
<div class="main" *ngIf="!loading && article">
  <div class="container mx-auto md:p-12 flex flex-wrap md:flex-nowrap gap-8 text-black text-family">

    <!-- Left: Article -->
    <div class="w-full md:w-[70%]">
      <div class="p-2 md:p-0">

        <!-- Video Rendering -->
        <ng-container *ngIf="article.entries?.[0]?.video && isBrowser">
          <video
            controls
            autoplay
            class="w-full h-64 mt-2 mb-4"
            *ngIf="isMobile">
            <source [src]="getVideoUrl(article.entries[0].video)" type="video/mp4" />
            Your browser does not support the video tag.
          </video>

          <video
            controls
            autoplay
            class="w-full object-fill mt-4 mb-4 rounded-lg"
            *ngIf="!isMobile">
            <source [src]="getVideoUrl(article.entries[0].video)" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
        </ng-container>

        <!-- Title -->
        <h1 class="text-xl font-[700] md:font-[700] text-black leading-tight flex">
          {{ article.title }}
        </h1>

        <!-- Article Body -->
        <div *ngIf="showDescription" class="mt-2 custom-html-style" [innerHTML]="getSafeHtml(article.body)"></div>

        <!-- Read More Toggle -->
        <span
          (click)="showDescription = !showDescription"
          class="Readmore text-black mt-4 hover:bg-gray-800 transition duration-300"
          [innerHTML]="showDescription ? 'Read less <i class=\'fa-solid fa-chevron-up\'></i>' : 'Read more <i class=\'fa-solid fa-chevron-down\'></i>'">
        </span>

        <!-- Article Info -->
        <div class="flex gap-5 mt-4">
          <p class="text-gray-600">By: <span class="font-semibold text-black">{{ article.author }}</span></p>
          <p class="text-gray-600">{{ allTimeStats }} Views</p>
          <p class="text-gray-600">{{ article.formattedCreatedAt }}</p>
        </div>

        <!-- Tags -->
 <div class="tags mb-2" *ngIf="tags && tags.length > 0 ">
          <span *ngFor="let tag of tags" class="tag">
            {{ tag.name }}
          </span>
        </div>

        <!-- Like / Comment -->
        <app-like-dislike></app-like-dislike>
        <app-comment></app-comment>

        <!-- More News -->
        <div class="more mt-3 p-0 md:p-0">
          <app-more-news></app-more-news>
        </div>
      </div>
    </div>

    <!-- Right: Trending News -->
    <div class="w-full md:w-[30%]">
      <app-tranding-news></app-tranding-news>
    </div>
  </div>
</div>
